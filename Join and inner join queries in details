
1. **Important notes about JOINs** (general + key points from your practice).
2. **Tables used in your queries**.
3. **Queries** with **Q&A**.

Here‚Äôs a complete version:

---

# SQL Joins & Queries Practice Notes

---

## **üìå Important Notes About Joins**

**1. INNER JOIN**

* Returns **only matching rows** from both tables.
* Most commonly used when you want to combine related data and ignore unmatched rows.
* Syntax:

```sql
SELECT columns
FROM table1
INNER JOIN table2 ON table1.id = table2.id;
```

**2. LEFT JOIN / LEFT OUTER JOIN**

* Returns **all rows from the left table** and matching rows from the right table.
* Non-matching right table columns are filled with `NULL`.

**3. RIGHT JOIN / RIGHT OUTER JOIN**

* Returns **all rows from the right table** and matching rows from the left table.
* Non-matching left table columns are filled with `NULL`.

**4. FULL JOIN / FULL OUTER JOIN**

* Returns rows **when either table matches**.
* Non-matching columns are `NULL`.

**5. CROSS JOIN**

* Returns **Cartesian product** of both tables (all combinations).

**6. SELF JOIN**

* Join a table to itself for hierarchical or comparative data.

---

### **üí° Important Notes from Your Practice**

* Joins were mostly **INNER JOINs**, meaning only matched data across tables were considered.
* Aggregation functions like `SUM()` and `COUNT()` are commonly used **after joins**.
* `GROUP BY` is needed when using aggregation **per entity** (e.g., per film or per customer).
* `ORDER BY` is used to sort aggregated results (e.g., highest revenue, most rented films).

---

## **üìã Tables Used**

1. **film**

* `film_id` (PK), `title`, `description`, `release_year`, `language_id`, etc.

2. **inventory**

* `inventory_id` (PK), `film_id` (FK), `store_id`, etc.

3. **rental**

* `rental_id` (PK), `inventory_id` (FK), `customer_id` (FK), `rental_date`, `return_date`, etc.

4. **payment**

* `payment_id` (PK), `customer_id` (FK), `rental_id` (FK), `amount`, `payment_date`

5. **customer**

* `customer_id` (PK), `first_name`, `last_name`, `email`, `store_id`, etc.

---

## **üìå Queries with Q&A**

---

### **1Ô∏è‚É£ Total revenue per film (desc order)**

```sql
SELECT title, SUM(payment.amount) AS Total_revenue
FROM film
INNER JOIN inventory ON film.film_id = inventory.film_id
INNER JOIN rental ON inventory.inventory_id = rental.inventory_id
INNER JOIN payment ON rental.rental_id = payment.rental_id
GROUP BY title
ORDER BY SUM(payment.amount) DESC;
```

**Q:** How can you find the total revenue generated by each film, sorted from highest to lowest?
**A:**

* Join `film ‚Üí inventory ‚Üí rental ‚Üí payment`.
* Use `SUM(payment.amount)` for revenue.
* Group by film title.
* Sort with `ORDER BY SUM(payment.amount) DESC`.

---

### **2Ô∏è‚É£ Total revenue per film (no order)**

```sql
SELECT title, SUM(payment.amount)
FROM film
INNER JOIN inventory ON film.film_id = inventory.film_id
INNER JOIN rental ON inventory.inventory_id = rental.inventory_id
INNER JOIN payment ON rental.rental_id = payment.rental_id
GROUP BY title;
```

**Q:** How do you get total revenue per film without sorting?
**A:** Same as previous query but **no ORDER BY**, returns revenue per film in any order.

---

### **3Ô∏è‚É£ Number of times each film rented (desc order)**

```sql
SELECT title, COUNT(film.film_id) AS num_rented
FROM film
INNER JOIN inventory ON film.film_id = inventory.film_id
INNER JOIN rental ON inventory.inventory_id = rental.inventory_id
GROUP BY title
ORDER BY COUNT(film.film_id) DESC;
```

**Q:** How to find the most rented films?
**A:**

* Join `film ‚Üí inventory ‚Üí rental`.
* Count film occurrences using `COUNT(film.film_id)`.
* Group by title.
* Sort descending to show most rented first.

---

### **4Ô∏è‚É£ Total amount spent by each customer (desc order)**

```sql
SELECT customer.customer_id, first_name, last_name, SUM(amount) AS total_amount_spent
FROM customer
INNER JOIN payment ON customer.customer_id = payment.customer_id
GROUP BY customer.customer_id, first_name, last_name
ORDER BY total_amount_spent DESC;
```

**Q:** How do you find the top spending customers?
**A:**

* Join `customer ‚Üí payment`.
* Aggregate with `SUM(amount)`.
* Group by customer.
* Sort descending by total spent.

---

### **5Ô∏è‚É£ Count payments per customer**

```sql
SELECT customer.customer_id, first_name, last_name, COUNT(payment_id)
FROM customer
INNER JOIN payment ON customer.customer_id = payment.customer_id
GROUP BY customer.customer_id, first_name, last_name;
```

**Q:** How do you find how many payments each customer made?
**A:**

* Join `customer ‚Üí payment`.
* Count payment IDs.
* Group by customer ID (and optionally first & last name).

---

### **6Ô∏è‚É£ Count payments per customer (minimal group)**

```sql
SELECT customer.customer_id, first_name, last_name, COUNT(payment_id)
FROM customer
INNER JOIN payment ON customer.customer_id = payment.customer_id
GROUP BY customer.customer_id;
```

**Q:** How do you count payments using only customer_id in group by?
**A:**

* Some DBs allow grouping by PK only.
* Returns payment count per customer.
* Names may appear but aren‚Äôt strictly part of the group (DB-specific behavior).

---

‚úÖ **Summary of Patterns You Practiced**

1. **Joins**: `film ‚Üí inventory ‚Üí rental ‚Üí payment`, `customer ‚Üí payment`
2. **Aggregations**: `SUM()`, `COUNT()`
3. **Grouping**: `GROUP BY title`, `GROUP BY customer_id`
4. **Sorting**: `ORDER BY SUM(...) DESC`, `ORDER BY COUNT(...) DESC`

---

If you want, I can also **draw a simple diagram showing how all your tables are joined** ‚Äì it makes it super easy to visualize for GitHub notes or interviews.

Do you want me to do that?
